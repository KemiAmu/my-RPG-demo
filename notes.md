# 游戏架构图

这是一个 MarkMap 图示，你可以在 [markmap.js.org](https://markmap.js.org/) 中查看。

## 要素注释
- 剧情 & 进度
- 玩家 & 实体 & NPC & 怪物 & 冲刺动作
- 开放世界玩法 & 多场景地图
- 弹幕 & 回合对战 & 独立对战场景
- 物品背包 & 状态效果 & 未确定

## 全局上下文
### 进度管理器
- 主线剧情
- 支线剧情
- 进度标志
- 成就节点
### 事件总线
### 玩家数据管理
- 属性系统
- 状态管理
- 背包系统
### 物品枚举
### 序列化存储
- 玩家数据
- 进度数据

## 实体基类（接口）
- 怪物节点（预制件对象）
- 玩家节点（预制件对象）
- NPC 节点（预制件对象）
- 实体节点（预制件对象）





## ……

---









## 进度管理器
### 剧情树
- 主干剧情
- 支线剧情
- 进度标志
- 成就节点
### 序列化存档
- 玩家数据
- 剧情树状态
- 物品库存
## 事件总线
- 战斗开始
- 伤害触发
- 剧情推进
- UI刷新
## 数据管理器
### 玩家实体
#### 属性系统
- 生命值
- 能量值
- 攻击力
- 防御力
#### 状态管理
- 增益效果
- 减益效果
#### 背包系统
- 物品类型
- 数量管理
#### 技能书
- 已学技能
- 冷却管理
### 怪物数据
- 基础属性
- 弹幕模式
### 物品数据
- 消耗品
- 装备品
## 场景根节点
### 世界容器
- WorldPlayer
- NPC 节点
- 怪物
- 地图场景
- 区域触发器
- WorldCamera
### 战斗容器
- BattlePlayer
- 怪物
- 地图场景
- 战斗 UI
- CombatCamera
### UI容器
- 全局HUD
- 对话框
- 菜单界面
## 战斗系统
### 回合调度器
- 行动队列
- 优先级排序
### 动作执行器
- 攻击判定
- 技能效果
- 道具使用
### 怪物行为树
- 游荡 / 追击行为
- 弹幕模式
### 弹幕实现以及管理
- 碰撞检测
- 伤害计算
