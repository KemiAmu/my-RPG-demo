# 游戏架构图

这是一个 MarkMap 图示，你可以在 [markmap.js.org](https://markmap.js.org/) 中查看。

## 要素注释
- 剧情 & 进度
- 玩家 & 实体 & NPC & 怪物 & 冲刺动作
- 开放世界玩法 & 多场景地图
- 弹幕 & 回合对战 & 独立对战场景
- 物品背包 & 状态效果 & 还未明确但需要拓展的机制
- Godot & 简单直接原则 & 游戏原型快速开发

## 全局上下文调度
### 事件总线
- Signals（事件广播）
### 逻辑层 & 剧情行为树（Dialogic）
- 对话树（可视化分支逻辑）
- 黑板系统（存储进度标志）
- 事件广播（触发战斗/任务/剧情）
### 人机交互 & 指示系统
- 镜头管理 & 画面调度
- 对话界面控制器（绑定 Dialogic）
- UI 管理（全局HUD/菜单）

## 子系统
### 玩家系统
- 全局玩家实体控制
- 属性系统（HP/MP/攻击力）
- 状态机（移动/战斗/死亡）
- 状态效果（中毒/燃烧/冻结）
- 背包系统（物品槽）
### 战斗系统
- 回合调度器
- 技能/道具系统
### 物品系统
- 物品枚举
- 属性（分类/作用/附加属性）
- `.tres` 序列化接口
### 存档系统（Resource 存储）
- 玩家数据（序列化接口）
- 进度数据（`Dialogic.Variables` 提取）

## 节点接口
### 实体基类
- 玩家实体
- 怪物实体（多态）
- NPC 实体（多态）
- 实体 & 非生物
### 场景基类
- 世界场景
- 战斗场景
### 组件系统
- 实体行为接口
- 场景预制件

## 节点树示意
### 世界场景（动态替换）
- WorldPlayer
- NPC
- 怪物
- 场景地图
- 区域触发器
- WorldCamera
### 战斗场景（动态替换）
- BattlePlayer
- 怪物
- 场景地图
- CombatCamera
### UI容器
- 全局 HUD
- 角色立绘 & 对话框（Dialogic）
- 战斗 UI
- 菜单界面
